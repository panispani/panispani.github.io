<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> sanitext – Remove LLM-generated Text Fingerprints | Panayiotis Panayiotou (Pani) </title> <meta name="author" content="Panayiotis Panayiotou (Pani)"> <meta name="description" content=""> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%BE&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://panispani.github.io/blog/2025/sanitext/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Panayiotis </span> Panayiotou (Pani) </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">sanitext – Remove LLM-generated Text Fingerprints</h1> <p class="post-meta"> March 11, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/llm"> <i class="fa-solid fa-hashtag fa-sm"></i> LLM</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="the-hidden-fingerpint">The Hidden Fingerpint</h2> <p>How many differences can you spot between these two?</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- I'm AI.            (Normal text)
− І’m󠅘󠅟󠅜󠅑 ΑІ.󠅓󠅙󠅑󠅟            (AI-tainted text)
</code></pre></div></div> <p>You probably noticed that the second quote looks a bit different? Actually, every single character in the second string is "tainted" in some way!</p> <ul> <li> <code class="language-plaintext highlighter-rouge">−</code> (U+2212) is a minus sign instead of a hyphen</li> <li> <code class="language-plaintext highlighter-rouge"> </code> (U+2009) is thin space</li> <li> <code class="language-plaintext highlighter-rouge">І</code> (U+406) is a cyrillic letter instead of the latin “I”</li> <li> <code class="language-plaintext highlighter-rouge">’</code> (U+2019) is a right single quoation mark instead of a regular quote <sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> </li> <li> <code class="language-plaintext highlighter-rouge">m󠅘󠅟󠅜󠅑</code> is the letter ‘m’ followed by hidden variation selectors, which encode the message "hola" (more info <a href="https://paulbutler.org/2025/smuggling-arbitrary-data-through-an-emoji/" rel="external nofollow noopener" target="_blank">here</a>)</li> <li> <code class="language-plaintext highlighter-rouge"> </code> (U+2009) is thin space</li> <li> <code class="language-plaintext highlighter-rouge">Α</code> (U+391) is a greek letter</li> <li> <code class="language-plaintext highlighter-rouge">І</code> (U+406) is cyrillic</li> <li> <code class="language-plaintext highlighter-rouge">.󠅓󠅙󠅑󠅟</code> is the period ‘.’ with the encoded message "ciao" using variation selectors</li> </ul> <p>You’d never notice these with the naked eye, but they could be used to detect AI-generated text.</p> <p>Which raises the question: if you mostly need an LLM to generate <strong>ASCII</strong> (code, emails, ..), why allow unnecessary Unicode? And if you do need specific Unicode characters, why not just <strong>explicitly define</strong> which ones?</p> <p><strong>Will Paste Special (Cmd+Shift+V) Fix This?</strong> In some apps, "Paste Special" strips formatting and replaces fancy typography with plain ASCII. But it <strong>won’t always remove invisible characters or homoglyphs</strong>. For example, I tried <strong>Paste Special</strong> in Sublime Text, and nothing was removed—but the thin space (U+2009) was clearly visible.</p> <h3 id="why-i-built-this"><strong>Why I Built This</strong></h3> <p>This isn’t a claim that major LLMs do all (or any) of these tricks. That said, I started working on this because I <strong>accidentally</strong> discovered an instance of text fingerprinting while debugging a byte-sensitive bug. That’s when I realized: it’s time to say goodbye to (at least these kinds of) fingerprints for good. 🙂</p> <p>Even if the LLM itself doesn’t add these, a wrapper around it might. This tool is for anyone who wants <strong>clean, reliable text</strong>, free from invisible garbage hiding inside.</p> <p>Edit: I’ve definitely come across random variation selectors from time to time. Otherwise, the most common case is typography: like em-dashes instead of hyphens, curly apostrophes, etc. If you’re feeding LLM output into a search tool, these subtle differences might not work in your favor (unless you always use fancy typography)!<br> Also, your “writing signature” shifts when you go from never using proper typography to suddenly using it flawlessly, especially within a longer piece, or a series of tweets where only some follow these rules.</p> <h2 id="zooming-out-watermarks--fingerprints"><strong>Zooming out: Watermarks &amp; Fingerprints</strong></h2> <p>AI-generated content, in general, can be <em>marked</em>, sometimes invisibly, to identify its origin. A few examples:</p> <ul> <li> <p><strong>Latent Space Fingerprints</strong> - AI models leave behind subtle statistical patterns. Their text generation follows a probability distribution, creating a kind of <strong>stochastic signature</strong> (e.g., by occasionally using certain rare words).</p> </li> <li> <p><strong>Watermarking</strong> – Models can sneak in patterns in text, images, or audio. Think of it as an AI signature, hidden but detectable.</p> </li> <li> <p><strong>Metadata Encoding</strong> – Some AI-generated media comes with metadata baked in (e.g., image EXIF data).</p> </li> <li> <p><strong>Steganography</strong> – Messages can be embedded within the output, only detectable with the right key.</p> </li> </ul> <h2 id="the-problem-llm-systems-can-fingerprint-their-outputs-with-unicode-shenanigans"><strong>The Problem: LLM systems can Fingerprint their Outputs with Unicode Shenanigans</strong></h2> <p>LLM systems can inject subtle fingerprints into their outputs using Unicode tricks. These can include homoglyphs (characters that look identical but aren’t), invisible characters, and other Unicode weirdness–all embedded in AI-generated text for later detection.</p> <p>If AI-generated text is secretly marked, your emails, reports, or even tweets might be screaming "AI-generated" without you realizing it–though a filter might.</p> <h2 id="how-do-i-remove-this-sanitext"><strong>How do I remove this: <code class="language-plaintext highlighter-rouge">sanitext</code></strong></h2> <p><code class="language-plaintext highlighter-rouge">sanitext</code> is a simple command-line tool and Python library that:</p> <p>✔ <strong>Detects</strong> suspicious Unicode characters (defaults to ASCII-only)<br> ✔ <strong>Normalizes</strong> lookalike characters to ASCII equivalents<br> ✔ <strong>Removes</strong> characters with no lookalikes<br> ✔ <strong>Supports</strong> custom character allowlists (<code class="language-plaintext highlighter-rouge">--allow-chars</code>, <code class="language-plaintext highlighter-rouge">--allow-file</code>)<br> ✔ <strong>Works with your clipboard</strong>-no manual pasting needed (unless you want to)</p> <h2 id="how-it-works"><strong>How It Works</strong></h2> <p><code class="language-plaintext highlighter-rouge">sanitext</code> cleans up funky Unicode text using <strong>Unicode normalization (NFKC)</strong>, <strong>homoglyph mapping</strong>, and a <strong>special cleanup process</strong>: if not a <a href="https://github.com/panispani/sanitext/blob/main/sanitext/homoglyph_map.py" rel="external nofollow noopener" target="_blank">known homoglyph</a>, decompose the Unicode character and check for ASCII characters in the decomposition, e.g., <code class="language-plaintext highlighter-rouge">ﬁ</code> (U+FB01) decomposes to <code class="language-plaintext highlighter-rouge">f</code> + <code class="language-plaintext highlighter-rouge">i</code>.</p> <p>It also <strong>flags suspicious characters</strong> so you can see exactly what’s causing trouble. You can also allow specific Unicode characters or single-codepoint emojis.</p> <h3 id="-install-in-seconds"><strong>🚀 Install in Seconds</strong></h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install </span>sanitext
</code></pre></div></div> <p>Now you can use it straight from the command line.</p> <h2 id="cli-usage-example">CLI usage example</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Process the clipboard content &amp; copy back to clipboard</span>
sanitext
<span class="c"># Detect characters but don't modify</span>
sanitext <span class="nt">--detect</span>
<span class="c"># Process clipboard + show detected characters (most common command)</span>
sanitext <span class="nt">-v</span>
<span class="c"># Process clipboard + show input, detected characters &amp; output</span>
sanitext <span class="nt">-vv</span>
<span class="c"># Process the provided string and print it</span>
sanitext <span class="nt">--string</span> <span class="s2">"Héllø, 𝒲𝑜𝓇𝓁𝒹!"</span>
<span class="c"># Allow additional characters (for now, only single unicode code point characters)</span>
sanitext <span class="nt">--allow-chars</span> <span class="s2">"αøñç"</span>
<span class="c"># Allow characters from a file</span>
sanitext <span class="nt">--allow-file</span> allowed_chars.txt
<span class="c"># Allow single code point emoji</span>
sanitext <span class="nt">--allow-emoji</span>
<span class="c"># Prompt user for handling disallowed characters</span>
<span class="c"># y (Yes) -&gt; keep it</span>
<span class="c"># n (No) -&gt; remove it</span>
<span class="c"># r (Replace) -&gt; provide a replacement character</span>
sanitext <span class="nt">--interactive</span>
<span class="c"># Allow emojis</span>
sanitext <span class="nt">--allow-emoji</span>
</code></pre></div></div> <h2 id="python-library-usage-example">Python library usage example</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">sanitext.text_sanitization</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">sanitize_text</span><span class="p">,</span>
    <span class="n">detect_suspicious_characters</span><span class="p">,</span>
    <span class="n">get_allowed_characters</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="sh">"</span><span class="s">“2×3 – 4 = 5”😎󠅒󠅟󠅣󠅣</span><span class="sh">"</span>

<span class="c1"># Detect suspicious characters
</span><span class="n">suspicious_characters</span> <span class="o">=</span> <span class="nf">detect_suspicious_characters</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Suspicious characters: </span><span class="si">{</span><span class="n">suspicious_characters</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># [('“', 'LEFT DOUBLE QUOTATION MARK'), ('×', 'MULTIPLICATION SIGN'), ('–', 'EN DASH'), ('”', 'RIGHT DOUBLE QUOTATION MARK')]
</span>
<span class="c1"># Sanitize text to all ASCII
</span><span class="n">sanitized_text</span> <span class="o">=</span> <span class="nf">sanitize_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Sanitized text: </span><span class="si">{</span><span class="n">sanitized_text</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># "2x3 - 4 = 5"
# Allow the multiplication sign
</span><span class="n">allowed_characters</span> <span class="o">=</span> <span class="nf">get_allowed_characters</span><span class="p">()</span>
<span class="n">allowed_characters</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="sh">"</span><span class="s">×</span><span class="sh">"</span><span class="p">)</span>
<span class="n">sanitized_text</span> <span class="o">=</span> <span class="nf">sanitize_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">allowed_characters</span><span class="o">=</span><span class="n">allowed_characters</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Sanitized text: </span><span class="si">{</span><span class="n">sanitized_text</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># "2×3 - 4 = 5"
# Allow the emoji (but clean it from the encoded message "boss")
</span><span class="n">allowed_characters</span> <span class="o">=</span> <span class="nf">get_allowed_characters</span><span class="p">(</span><span class="n">allow_emoji</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">sanitized_text</span> <span class="o">=</span> <span class="nf">sanitize_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">allowed_characters</span><span class="o">=</span><span class="n">allowed_characters</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Sanitized text: </span><span class="si">{</span><span class="n">sanitized_text</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># "2x3 - 4 = 5"😎
</span></code></pre></div></div> <h3 id="-want-to-see-the-code"><strong>📂 Want to See the Code?</strong></h3> <p>Check out the code here: <a href="https://github.com/panispani/sanitext" rel="external nofollow noopener" target="_blank">https://github.com/panispani/sanitext</a>.<br> Feel free to fork it, break it, improve it, or just use it to make your life easier.</p> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:1"> <p>The right single quotation mark <code class="language-plaintext highlighter-rouge">’</code>, while unusual on US keyboards, is automatically used to replace single quotes on iPhones if <strong>Smart Punctuation</strong> is enabled. However, I suspect that many of the long LinkedIn posts I notice this in weren’t written on an iPhone :) <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p> </li> </ol> </div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/Molecular-graph-learning-in-the-Optimal-Transport-Geometry/">Molecular graph learning in the Optimal Transport Geometry</a> </li> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://tikzjax.com/v1/tikzjax.js"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>